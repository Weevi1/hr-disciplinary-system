import{u as e,j as s,L as t,F as a,q as l}from"./business-owner-dashboard-DLxBIxc_.js";import{u as r,r as d}from"./react-vendor-CWjEGAcE.js";import{w as i,R as n,X as c,m as o,n as x,Q as m,aQ as u,a as h,r as g,F as b,U as j,S as p,a8 as N}from"./ui-vendor-Cw5dse3Y.js";import"./pdf-vendor-tUwojRr6.js";import"./firebase-vendor-Cc210LOb.js";const f="hr_meeting_requests",y=[{id:"pending",label:"Pending Review",color:"yellow",icon:"â³"},{id:"scheduled",label:"Scheduled",color:"blue",icon:"ðŸ“…"},{id:"completed",label:"Completed",color:"green",icon:"âœ…"},{id:"cancelled",label:"Cancelled",color:"red",icon:"âŒ"}],v=()=>{const v=r(),{user:w}=e(),[C,R]=d.useState([]),[S,D]=d.useState([]),[q,k]=d.useState(!0),[T,z]=d.useState(null),[M,F]=d.useState(null),[L,E]=d.useState(!1),[I,A]=d.useState(""),[H,P]=d.useState("all"),[U,$]=d.useState({status:"",scheduledDate:"",scheduledTime:"",hrNotes:""}),[Q,Y]=d.useState(!1);d.useEffect(()=>{(async()=>{if(w?.organizationId)try{k(!0),z(null),w.organizationId;const e=await a.queryDocuments(f,[{field:"organizationId",operator:"==",value:w.organizationId}],"createdAt",50);t.success(3346),R(e),D(e)}catch(e){t.error("âŒ Error loading meeting requests:",e),z("Failed to load meeting requests. Please try again."),R([]),D([])}finally{k(!1)}else k(!1)})()},[w?.organizationId]),d.useEffect(()=>{let e=C;if(I){const s=I.toLowerCase();e=e.filter(e=>e.employeeName.toLowerCase().includes(s)||e.managerName.toLowerCase().includes(s)||e.context.toLowerCase().includes(s))}"all"!==H&&(e=e.filter(e=>e.status===H)),D(e)},[C,I,H]);const _={total:C.length,pending:C.filter(e=>"pending"===e.status).length,scheduled:C.filter(e=>"scheduled"===e.status).length,completed:C.filter(e=>"completed"===e.status).length};return q?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Loading Meeting Requests..."}),s.jsx("p",{className:"text-gray-600",children:"Preparing HR review interface..."})]})}):w?.organizationId?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 p-4",children:s.jsxs("div",{className:"max-w-6xl mx-auto",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-700 rounded-2xl p-6 text-white shadow-xl mb-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(i,{className:"w-8 h-8"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"HR Meeting Review"}),s.jsx("p",{className:"text-blue-100",children:"Manage and schedule employee meetings"})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:()=>window.location.reload(),className:"p-2 rounded-lg bg-white/20 hover:bg-white/30 transition-colors",title:"Refresh",children:s.jsx(n,{className:"w-6 h-6"})}),s.jsx("button",{onClick:()=>v("/dashboard"),className:"p-2 rounded-lg bg-white/20 hover:bg-white/30 transition-colors",children:s.jsx(c,{className:"w-6 h-6"})})]})]})}),T&&s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(o,{className:"w-5 h-5 text-red-600"}),s.jsx("span",{className:"text-red-800 font-medium",children:"Error"})]}),s.jsx("p",{className:"text-red-700 text-sm mt-1",children:T})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[s.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total Requests"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:_.total})]}),s.jsx(x,{className:"w-8 h-8 text-blue-500"})]})}),s.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Pending"}),s.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:_.pending})]}),s.jsx(m,{className:"w-8 h-8 text-yellow-500"})]})}),s.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Scheduled"}),s.jsx("p",{className:"text-2xl font-bold text-blue-600",children:_.scheduled})]}),s.jsx(u,{className:"w-8 h-8 text-blue-500"})]})}),s.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Completed"}),s.jsx("p",{className:"text-2xl font-bold text-green-600",children:_.completed})]}),s.jsx(h,{className:"w-8 h-8 text-green-500"})]})})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"relative",children:[s.jsx(g,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search by employee, manager, or context...",value:I,onChange:e=>A(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),s.jsx("div",{className:"md:w-64",children:s.jsxs("select",{value:H,onChange:e=>P(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"all",children:"All Statuses"}),y.map(e=>s.jsxs("option",{value:e.id,children:[e.icon," ",e.label]},e.id))]})})]})}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[s.jsx("div",{className:"p-6 border-b border-gray-200",children:s.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center gap-2",children:[s.jsx(b,{className:"w-5 h-5 text-blue-600"}),"Meeting Requests (",S.length,")"]})}),0===S.length?s.jsxs("div",{className:"p-12 text-center",children:[s.jsx(i,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:0===C.length?"No Meeting Requests":"No Matching Requests"}),s.jsx("p",{className:"text-gray-600",children:0===C.length?"No managers have submitted meeting requests yet.":"Try adjusting your search or filter criteria."})]}):s.jsx("div",{className:"divide-y divide-gray-200",children:S.map(e=>{const t=(e=>{const s=y.find(s=>s.id===e);if(!s)return{bg:"bg-gray-100",text:"text-gray-800",border:"border-gray-200"};const t={yellow:{bg:"bg-yellow-100",text:"text-yellow-800",border:"border-yellow-200"},blue:{bg:"bg-blue-100",text:"text-blue-800",border:"border-blue-200"},green:{bg:"bg-green-100",text:"text-green-800",border:"border-green-200"},red:{bg:"bg-red-100",text:"text-red-800",border:"border-red-200"}};return t[s.color]||t.yellow})(e.status),a=y.find(s=>s.id===e.status);return s.jsx("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(j,{className:"w-5 h-5 text-gray-400"}),s.jsx("span",{className:"font-semibold text-gray-900",children:e.employeeName})]}),s.jsxs("div",{className:`px-3 py-1 rounded-full text-sm font-medium border ${t.bg} ${t.text} ${t.border}`,children:[a?.icon," ",a?.label]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-gray-600 mb-4",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Requested by:"})," ",e.managerName]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Date:"})," ",new Date(e.requestDate).toLocaleDateString()]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Employee Consent:"}),s.jsx("span",{className:e.employeeConsent?"text-green-600":"text-red-600",children:e.employeeConsent?" âœ… Yes":" âŒ No"})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("span",{className:"font-medium text-gray-700",children:"Context:"}),s.jsxs("p",{className:"text-gray-600 mt-1",children:['"',e.context,'"']})]}),e.scheduledDate&&s.jsxs("div",{className:"mb-4 p-3 bg-blue-50 rounded-lg",children:[s.jsx("span",{className:"font-medium text-blue-700",children:"Scheduled:"}),s.jsxs("p",{className:"text-blue-600",children:[new Date(e.scheduledDate).toLocaleDateString(),e.scheduledTime&&` at ${e.scheduledTime}`]})]}),e.hrNotes&&s.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[s.jsx("span",{className:"font-medium text-gray-700",children:"HR Notes:"}),s.jsx("p",{className:"text-gray-600 mt-1",children:e.hrNotes})]})]}),s.jsx("div",{className:"flex items-center gap-2 ml-4",children:s.jsxs("button",{onClick:()=>(e=>{F(e),$({status:e.status,scheduledDate:e.scheduledDate||"",scheduledTime:e.scheduledTime||"",hrNotes:e.hrNotes||""}),E(!0)})(e),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[s.jsx(p,{className:"w-4 h-4"}),"Update"]})})]})},e.id)})})]}),L&&M&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50",onClick:()=>E(!1)}),s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[s.jsx("div",{className:"p-6 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Update Meeting Request"}),s.jsx("button",{onClick:()=>E(!1),className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100",children:s.jsx(c,{className:"w-5 h-5"})})]})}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[s.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Meeting Request Details"}),s.jsxs("div",{className:"text-sm text-blue-700 space-y-1",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Employee:"})," ",M.employeeName]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Manager:"})," ",M.managerName]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Context:"}),' "',M.context,'"']})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Status ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("select",{value:U.status,onChange:e=>$(s=>({...s,status:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:y.map(e=>s.jsxs("option",{value:e.id,children:[e.icon," ",e.label]},e.id))})]}),("scheduled"===U.status||"completed"===U.status)&&s.jsx(s.Fragment,{children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Meeting Date"}),s.jsx("input",{type:"date",value:U.scheduledDate,onChange:e=>$(s=>({...s,scheduledDate:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Meeting Time"}),s.jsx("input",{type:"time",value:U.scheduledTime,onChange:e=>$(s=>({...s,scheduledTime:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"HR Notes"}),s.jsx("textarea",{value:U.hrNotes,onChange:e=>$(s=>({...s,hrNotes:e.target.value})),placeholder:"Add any HR notes or meeting details...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",rows:4})]})]}),s.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-end gap-3",children:[s.jsx("button",{onClick:()=>E(!1),className:"px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),s.jsx("button",{onClick:async()=>{if(M&&w)try{Y(!0),z(null);const e={status:U.status,scheduledDate:U.scheduledDate||void 0,scheduledTime:U.scheduledTime||void 0,hrNotes:U.hrNotes.trim()||void 0,hrReviewedBy:w.id,hrReviewedAt:l.getServerTimestamp(),updatedAt:l.getServerTimestamp()};await a.updateDocument(f,M.id,e),R(s=>s.map(s=>s.id===M.id?{...s,...e}:s)),E(!1),F(null),t.success(5953)}catch(e){t.error("âŒ Error updating meeting request:",e),z("Failed to update meeting request. Please try again.")}finally{Y(!1)}},disabled:!U.status||Q,className:"px-6 py-3 rounded-lg font-semibold transition-colors flex items-center gap-2 "+(U.status&&!Q?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-200 text-gray-400 cursor-not-allowed"),children:Q?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Updating..."]}):s.jsxs(s.Fragment,{children:[s.jsx(N,{className:"w-4 h-4"}),"Update Request"]})})]})]})})]})]})}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center max-w-md",children:[s.jsx("div",{className:"text-6xl mb-4",children:"âš ï¸"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Organization Not Found"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"You don't seem to be associated with an organization."}),s.jsx("button",{onClick:()=>v("/dashboard"),className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"Return to Dashboard"})]})})};export{v as HRMeetingReview};
