import{u as me,d as ce,L as h,j as e,n as de,A as xe,l as ue}from"./dashboard-components-fvKPXzEF.js";import{u as he,r as n}from"./react-vendor-DrdoFN08.js";import{i as ge,a7 as re,aQ as pe,X as fe,C as X,F as be,c as B,b as se,A as te,aa as D,as as Ne,h as je,a9 as ye}from"./ui-vendor-X12rCvv3.js";import"./firebase-vendor-Cz3N8Xg7.js";import"./pdf-vendor-Bp5yZ91a.js";import"./warning-components-DfE_qdbY.js";const ae=({onSignatureChange:N,label:l,required:b=!1,role:i="manager",personName:I="User"})=>{const o=n.useRef(null),F=n.useRef(null),[$,L]=n.useState(!1),[g,U]=n.useState(!1),[M,A]=n.useState(0),[w,H]=n.useState(!1),C=a=>{const r=o.current;if(!r)return{x:0,y:0};const m=r.getBoundingClientRect(),d=r.width/m.width,p=r.height/m.height;let T,y;if("touches"in a){if(a.touches.length===0)return{x:0,y:0};T=a.touches[0].clientX,y=a.touches[0].clientY}else T=a.clientX,y=a.clientY;return{x:(T-m.left)*d,y:(y-m.top)*p}},v=a=>{a.preventDefault();const r=o.current;if(!r)return;const m=r.getContext("2d");if(!m)return;const d=C(a);L(!0),A(p=>p+1),m.beginPath(),m.moveTo(d.x,d.y)},q=a=>{if(a.preventDefault(),!$)return;const r=o.current;if(!r)return;const m=r.getContext("2d");if(!m)return;const d=C(a);m.lineTo(d.x,d.y),m.stroke(),g||U(!0)},E=a=>{if(a.preventDefault(),$&&o.current){L(!1);const r=M>=3;H(r)}},j=()=>{if(w&&o.current){const a=o.current.toDataURL("image/png",.8);N(a)}},W=()=>{const a=o.current;if(!a)return;const r=a.getContext("2d");r&&(r.clearRect(0,0,a.width,a.height),S(),U(!1),A(0),H(!1),N(""))},S=n.useCallback(()=>{const a=o.current;if(!a)return;const r=a.getContext("2d");if(!r)return;const m=window.devicePixelRatio||1,d=a.getBoundingClientRect();a.width=d.width*m,a.height=d.height*m,r.scale(m,m),a.style.width=d.width+"px",a.style.height=d.height+"px",r.strokeStyle="#1f2937",r.lineWidth=2.5,r.lineCap="round",r.lineJoin="round",r.imageSmoothingEnabled=!0,r.save(),r.strokeStyle="#e5e7eb",r.lineWidth=1,r.setLineDash([5,5]),r.beginPath(),r.moveTo(20,d.height*.75),r.lineTo(d.width-20,d.height*.75),r.stroke(),r.restore()},[]);n.useEffect(()=>{S();const a=()=>{setTimeout(S,100)};return window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[S]);const u={manager:{primary:"blue",bg:"bg-blue-50",border:"border-blue-200",text:"text-blue-700",accent:"text-blue-600"},employee:{primary:"purple",bg:"bg-purple-50",border:"border-purple-200",text:"text-purple-700",accent:"text-purple-600"}}[i];return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 sm:gap-0",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{className:"block text-base sm:text-lg font-semibold text-gray-900",children:[l," ",b&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mt-1",children:i==="manager"?"Please sign below to confirm this meeting request":`${I}, please sign below if you agree to this meeting`})]}),e.jsx("div",{className:`flex items-center gap-1 sm:gap-2 px-2 sm:px-3 py-1 rounded-full text-xs sm:text-sm font-medium ${w?"bg-green-100 text-green-700":g?"bg-amber-100 text-amber-700":"bg-gray-100 text-gray-500"}`,children:w?e.jsxs(e.Fragment,{children:[e.jsx(X,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Valid Signature"}),e.jsx("span",{className:"sm:hidden",children:"Valid"})]}):g?e.jsxs(e.Fragment,{children:[e.jsx(je,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Needs More Detail"}),e.jsx("span",{className:"sm:hidden",children:"More Detail"})]}):e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Signature Required"}),e.jsx("span",{className:"sm:hidden",children:"Required"})]})})]}),e.jsxs("div",{className:`${u.bg} ${u.border} border-2 rounded-lg sm:rounded-xl p-4 sm:p-6 transition-all duration-200 ${$?"shadow-lg scale-[1.01]":"shadow-sm"}`,children:[e.jsxs("div",{ref:F,className:"relative",children:[e.jsx("canvas",{ref:o,className:`w-full h-32 sm:h-40 rounded-lg cursor-crosshair transition-all duration-200 ${g?"bg-white border-2 border-gray-300":"bg-white border-2 border-dashed border-gray-300 hover:border-gray-400"}`,onMouseDown:v,onMouseMove:q,onMouseUp:E,onMouseLeave:E,onTouchStart:v,onTouchMove:q,onTouchEnd:E,style:{touchAction:"none"}}),!g&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:e.jsxs("div",{className:"text-center text-gray-400",children:[e.jsx(D,{className:"w-6 h-6 sm:w-8 sm:h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-xs sm:text-sm font-medium",children:"Sign here with mouse or finger"}),e.jsx("p",{className:"text-xs hidden sm:block",children:"Your signature confirms your agreement"})]})})]}),e.jsxs("div",{className:"mt-3 sm:mt-4 flex flex-col sm:flex-row justify-between gap-3 sm:items-center",children:[e.jsx("div",{className:`text-xs sm:text-sm ${u.text}`,children:w?e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(X,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Signature ready to save"}),e.jsx("span",{className:"sm:hidden",children:"Ready to save"})]}):g?e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(B,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Please add more detail to your signature"}),e.jsx("span",{className:"sm:hidden",children:"Add more detail"})]}):e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(D,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Click/tap and drag to create your signature"}),e.jsx("span",{className:"sm:hidden",children:"Tap to sign"})]})}),e.jsxs("div",{className:"flex items-center gap-2 sm:flex-row w-full sm:w-auto",children:[e.jsxs("button",{type:"button",onClick:W,disabled:!g,className:`flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-xs sm:text-sm font-medium transition-colors min-h-[40px] flex-1 sm:flex-none ${g?"text-red-600 hover:text-red-700 hover:bg-red-50":"text-gray-400 cursor-not-allowed"}`,children:[e.jsx(ye,{className:"w-3 h-3 sm:w-4 sm:h-4"}),"Clear"]}),e.jsxs("button",{type:"button",onClick:j,disabled:!w,className:`flex items-center justify-center gap-2 px-3 sm:px-4 py-2 rounded-lg text-xs sm:text-sm font-medium transition-colors min-h-[40px] flex-1 sm:flex-none ${w?`bg-${u.primary}-600 text-white hover:bg-${u.primary}-700`:"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:[e.jsx(re,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Save Signature"}),e.jsx("span",{className:"sm:hidden",children:"Save"})]})]})]}),e.jsx("div",{className:`mt-3 p-2 sm:p-3 ${u.bg} border ${u.border} rounded-lg`,children:e.jsxs("p",{className:`text-xs ${u.text}`,children:[e.jsx("strong",{children:"Note:"})," Your digital signature has the same legal validity as a handwritten signature and confirms your agreement to this meeting request."]})})]})]})},Re=()=>{const N=he(),{user:l}=me(),{organization:b}=ce(),[i,I]=n.useState(null),[o,F]=n.useState(""),[$,L]=n.useState(""),[g,U]=n.useState(""),[M,A]=n.useState(null),[w,H]=n.useState(!1),[C,v]=n.useState("idle"),[q,E]=n.useState(null),j=n.useRef(),[W,S]=n.useState(!1),[Y,u]=n.useState(null),[a,r]=n.useState(!1),[m,d]=n.useState("form"),[p,T]=n.useState({}),[y,P]=n.useState(new Set),[O,V]=n.useState(!0),[k,_]=n.useState([]),f=n.useMemo(()=>`hr_meeting_draft_${l?.id}_${b?.id}`,[l?.id,b?.id]),J=n.useCallback(()=>{if(!f)return;const s={selectedEmployeeId:i?.id||"",context:o,step:m,timestamp:Date.now()};try{localStorage.setItem(f,JSON.stringify(s)),v("saved"),E(new Date),h.debug("ðŸ’¾ Auto-saved HR meeting draft",s)}catch(c){v("error"),h.error("Failed to auto-save HR meeting draft:",c)}},[f,i?.id,o,m]),G=n.useCallback(()=>{if(f)try{const s=localStorage.getItem(f);if(!s)return;const c=JSON.parse(s);if(Date.now()-c.timestamp>1440*60*1e3){localStorage.removeItem(f);return}return h.debug("ðŸ“‹ Restored HR meeting draft",c),c.context&&F(c.context),c}catch(s){h.error("Failed to restore HR meeting draft:",s),localStorage.removeItem(f)}},[f]),ne=n.useCallback(()=>{f&&(localStorage.removeItem(f),v("idle"),E(null))},[f]),z=n.useCallback((s,c)=>{const x={};switch(s){case"selectedEmployee":c||(x.selectedEmployee="Please select an employee");break;case"context":c?.trim()?c.length>80&&(x.context="Context must be 80 characters or less"):x.context="Context is required";break}return T(R=>({...R,[s]:x[s]||""})),!x[s]},[]);n.useEffect(()=>{b?.id&&l?.id?(async()=>{h.debug("ðŸ“‹ Loading employees for manager:",l.id,"Role:",l.role?.id,"Org:",b.id);try{V(!0),u(null);const c=await xe.employees.getByManager(l?.id||"",b.id);h.success(6333);const x=c.map(t=>({...t,id:t.id,firstName:t.profile?.firstName||t.firstName||"Unknown",lastName:t.profile?.lastName||t.lastName||"Employee",position:t.profile?.position||t.employment?.position||"Unknown Position",department:t.profile?.department||t.employment?.department||"Unknown",email:t.profile?.email||t.contact?.email||t.email||"",phone:t.profile?.phone||t.contact?.phone||t.phone||"",deliveryPreference:t.deliveryPreference||"email",profile:{...t.profile,firstName:t.profile?.firstName||t.firstName||"Unknown",lastName:t.profile?.lastName||t.lastName||"Employee",department:t.profile?.department||t.employment?.department||"Unknown",position:t.profile?.position||t.employment?.position||"Unknown Position",email:t.profile?.email||t.contact?.email||t.email||"",employeeNumber:t.profile?.employeeNumber||""},employment:{...t.employment,department:t.employment?.department||t.profile?.department||"Unknown",position:t.employment?.position||t.profile?.position||"Unknown Position"}}));h.debug("ðŸ‘¥ Employee details:",x.map(t=>`${t.firstName} ${t.lastName}`)),_(x);const R=G();if(R?.selectedEmployeeId){const t=x.find(oe=>oe.id===R.selectedEmployeeId);t&&(I(t),h.debug("ðŸ”„ Restored selected employee from draft"))}}catch(c){h.error("âŒ Error loading managed employees:",c),u("Failed to load your team members. Please try again."),_([])}finally{V(!1)}})():(h.debug("â³ Waiting for user or organization to load...",{userId:l?.id,orgId:b?.id}),V(!1))},[l?.id,b?.id,G]),n.useEffect(()=>(j.current&&clearTimeout(j.current),!O&&(i||o.trim())&&(v("saving"),j.current=setTimeout(()=>{J()},1e3)),()=>{j.current&&clearTimeout(j.current)}),[i,o,O,J]),n.useEffect(()=>()=>{j.current&&clearTimeout(j.current)},[]);const K=()=>i&&o.trim().length>0&&o.length<=80,le=s=>{L(s),s&&d("employee-decision")},Q=s=>{A(s),s?H(!0):Z()},ie=s=>{U(s),s&&Z()},Z=async()=>{if(!(!l||!i||!l.organizationId)){h.debug("DEBUG: User object from AuthContext:",l);try{S(!0),u(null);const s={organizationId:l.organizationId,managerId:l.id,managerName:`${l.firstName} ${l.lastName}`,employeeId:i.id,employeeName:`${i.profile.firstName} ${i.profile.lastName}`,context:o.trim(),managerSignature:$||"",employeeConsent:M||!1,status:"pending",requestDate:new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};M&&g&&(s.employeeSignature=g),await ue.createDocument(b.id,"meetings",s),ne(),d("complete"),r(!0),setTimeout(()=>{N("/dashboard")},3e3)}catch(s){h.error("Failed to submit meeting request:",s),u("Failed to submit meeting request. Please try again.")}finally{S(!1)}}},ee=80-o.length;return o.length>0&&o.length<=80,O?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Loading Your Team..."}),e.jsx("p",{className:"text-gray-600",children:"Finding employees you can book meetings for..."})]})}):l?.organizationId?k.length===0?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ‘¥"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Team Members Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:l.role?.id==="hod-manager"?"You don't have any direct reports assigned to book meetings with. Contact HR to assign team members.":"There are no employees you can book meetings with based on your role permissions."}),e.jsxs("div",{className:"space-y-3",children:[(l.role?.id==="hr-manager"||l.role?.id==="business-owner")&&e.jsx("button",{onClick:()=>N("/employees"),className:"w-full bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"Manage Employees"}),e.jsx("button",{onClick:()=>N("/dashboard"),className:"w-full bg-gray-200 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-300 transition-colors",children:"Return to Dashboard"})]})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 p-2 sm:p-4",children:e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-700 rounded-xl sm:rounded-2xl p-4 sm:p-6 text-white shadow-xl mb-4 sm:mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[e.jsx(ge,{className:"w-6 h-6 sm:w-8 sm:h-8"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold",children:"Book HR Meeting"}),C==="saving"&&e.jsxs("div",{className:"flex items-center gap-1 text-blue-200 text-xs sm:text-sm",children:[e.jsx("div",{className:"w-3 h-3 border border-blue-200 border-t-white rounded-full animate-spin"}),e.jsx("span",{className:"hidden sm:inline",children:"Saving..."}),e.jsx("span",{className:"sm:hidden",children:"..."})]}),C==="saved"&&q&&e.jsxs("div",{className:"flex items-center gap-1 text-green-200 text-xs sm:text-sm",children:[e.jsx(re,{className:"w-3 h-3"}),e.jsxs("span",{className:"hidden sm:inline",children:["Saved ",new Date(q).toLocaleTimeString()]}),e.jsx("span",{className:"sm:hidden",children:"âœ“"})]}),C==="error"&&e.jsxs("div",{className:"flex items-center gap-1 text-red-200 text-xs sm:text-sm",children:[e.jsx(pe,{className:"w-3 h-3"}),e.jsx("span",{className:"hidden sm:inline",children:"Save failed"}),e.jsx("span",{className:"sm:hidden",children:"âš ï¸"})]})]}),e.jsx("p",{className:"text-blue-100 text-sm sm:text-base",children:"Request meeting with HR department"})]})]}),e.jsx("button",{onClick:()=>N("/dashboard"),className:"p-3 sm:p-2 rounded-lg bg-white/20 hover:bg-white/30 transition-colors min-h-[44px] min-w-[44px] flex items-center justify-center",children:e.jsx(fe,{className:"w-5 h-5 sm:w-6 sm:h-6"})})]})}),m==="complete"&&a&&e.jsxs("div",{className:"bg-white rounded-xl sm:rounded-2xl shadow-lg p-4 sm:p-8 text-center",children:[e.jsx(X,{className:"w-12 h-12 sm:w-16 sm:h-16 text-green-500 mx-auto mb-3 sm:mb-4"}),e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-2",children:"Meeting Request Submitted!"}),e.jsx("p",{className:"text-gray-600 mb-4 sm:mb-6 text-sm sm:text-base",children:"HR has been notified and will schedule your meeting soon."}),e.jsx("div",{className:"bg-green-50 rounded-lg sm:rounded-xl p-4 sm:p-6 mb-4 sm:mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-3 sm:gap-4 text-xs sm:text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-green-700",children:"Employee:"}),e.jsxs("span",{className:"text-green-600",children:[i?.profile.firstName," ",i?.profile.lastName]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-green-700",children:"Context:"}),e.jsxs("span",{className:"text-green-600",children:['"',o,'"']})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-green-700",children:"Employee Consent:"}),e.jsx("span",{className:"text-green-600",children:M?"âœ… Agreed":"âŒ Manager-requested only"})]})]})}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:"Redirecting to dashboard in 3 seconds..."})]}),m==="form"&&e.jsxs("div",{className:"bg-white rounded-xl sm:rounded-2xl shadow-lg p-4 sm:p-6",children:[e.jsxs("div",{className:"mb-6 sm:mb-8",children:[e.jsxs("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900 mb-2 flex items-center gap-2",children:[e.jsx(be,{className:"w-4 h-4 sm:w-5 sm:h-5 text-blue-600"}),"Meeting Details"]}),e.jsxs("p",{className:"text-gray-600 text-xs sm:text-sm",children:["âœ… Found ",k.length," team member",k.length!==1?"s":""," you can book meetings for."]})]}),Y&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 sm:p-4 mb-4 sm:mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{className:"w-4 h-4 sm:w-5 sm:h-5 text-red-600 flex-shrink-0"}),e.jsx("span",{className:"text-red-800 font-medium text-sm sm:text-base",children:"Error"})]}),e.jsx("p",{className:"text-red-700 text-xs sm:text-sm mt-1",children:Y})]}),e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(de,{icon:se,title:"Select Team Member",subtitle:"Choose the employee for this HR meeting",rightContent:e.jsx("span",{className:"text-xs",style:{color:"var(--color-text-tertiary)"},children:k.length})}),e.jsxs("select",{value:i?.id||"",onChange:s=>{const c=k.find(x=>x.id===s.target.value);I(c||null),P(x=>new Set(x).add("selectedEmployee")),z("selectedEmployee",c)},onBlur:()=>{P(s=>new Set(s).add("selectedEmployee")),z("selectedEmployee",i)},className:"w-full h-11 px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm",style:{backgroundColor:y.has("selectedEmployee")&&p.selectedEmployee?"var(--color-alert-error-bg)":"var(--color-input-background)",borderColor:y.has("selectedEmployee")&&p.selectedEmployee?"var(--color-alert-error-border)":"var(--color-input-border)",color:"var(--color-text)"},children:[e.jsx("option",{value:"",children:"Choose a team member..."}),k.map(s=>{if(!s||!s.id)return null;const c=s.profile?.firstName||s.firstName||"Unknown",x=s.profile?.lastName||s.lastName||"Employee",R=s.profile?.department||s.employment?.department||"Unknown Department";return e.jsxs("option",{value:s.id,children:[c," ",x," - ",R]},s.id)}).filter(Boolean)]}),y.has("selectedEmployee")&&p.selectedEmployee&&e.jsxs("div",{className:"flex items-center gap-1 text-xs",style:{color:"var(--color-error)"},children:[e.jsx(B,{className:"w-3 h-3 flex-shrink-0"}),p.selectedEmployee]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Brief Context ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{value:o,onChange:s=>{F(s.target.value),P(c=>new Set(c).add("context")),z("context",s.target.value)},onBlur:()=>{P(s=>new Set(s).add("context")),z("context",o)},placeholder:"Brief reason for HR meeting (keep it concise)...",className:`w-full px-3 sm:px-4 py-3 text-sm sm:text-base border rounded-lg focus:ring-2 resize-none transition-colors min-h-[80px] ${y.has("context")&&p.context?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"}`,rows:3,maxLength:80}),e.jsxs("div",{className:`absolute bottom-2 right-2 text-xs font-medium ${ee<10?"text-red-500":"text-gray-500"}`,children:[ee," chars left"]})]}),y.has("context")&&p.context&&e.jsxs("p",{className:"text-red-600 text-xs sm:text-sm mt-1 flex items-center gap-1",children:[e.jsx(B,{className:"w-3 h-3 flex-shrink-0"}),p.context]})]})]}),e.jsxs("div",{className:"mt-6 sm:mt-8 flex flex-col sm:flex-row gap-3 sm:justify-between",children:[e.jsxs("button",{onClick:()=>N("/dashboard"),className:"px-4 sm:px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors flex items-center justify-center gap-2 min-h-[44px] text-sm sm:text-base order-2 sm:order-1",children:[e.jsx(te,{className:"w-4 h-4"}),"Cancel"]}),e.jsxs("button",{onClick:()=>d("manager-sign"),disabled:!K(),className:`px-4 sm:px-6 py-3 rounded-lg font-semibold transition-colors flex items-center justify-center gap-2 min-h-[44px] text-sm sm:text-base order-1 sm:order-2 ${K()?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:["Continue to Signatures",e.jsx(D,{className:"w-4 h-4"})]})]})]}),m==="manager-sign"&&e.jsxs("div",{className:"bg-white rounded-xl sm:rounded-2xl shadow-lg p-4 sm:p-6",children:[e.jsxs("div",{className:"mb-6 sm:mb-8",children:[e.jsxs("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900 mb-2 flex items-center gap-2",children:[e.jsx(D,{className:"w-4 h-4 sm:w-5 sm:h-5 text-blue-600"}),"Manager Signature Required"]}),e.jsx("p",{className:"text-gray-600 text-xs sm:text-sm",children:"As the requesting manager, please sign below to confirm this meeting request."})]}),e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg sm:rounded-xl p-4 sm:p-6",children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-3 sm:mb-4 text-sm sm:text-base",children:"Meeting Request Summary"}),e.jsxs("div",{className:"grid grid-cols-1 gap-2 sm:gap-3 text-xs sm:text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-blue-700",children:"Employee:"}),e.jsxs("span",{className:"text-blue-600",children:[i?.profile.firstName," ",i?.profile.lastName]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-blue-700",children:"Department:"}),e.jsx("span",{className:"text-blue-600",children:i?.profile.department||i?.employment.department})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-blue-700",children:"Context:"}),e.jsxs("span",{className:"text-blue-600",children:['"',o,'"']})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-blue-700",children:"Requested by:"}),e.jsxs("span",{className:"text-blue-600",children:[l?.firstName," ",l?.lastName]})]})]})]}),e.jsx(ae,{onSignatureChange:le,label:"Manager Authorization Signature",required:!0,role:"manager",personName:`${l?.firstName} ${l?.lastName}`})]}),e.jsxs("div",{className:"mt-6 sm:mt-8 flex flex-col sm:flex-row gap-3 sm:justify-between sm:items-center",children:[e.jsxs("button",{onClick:()=>d("form"),className:"px-4 sm:px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors flex items-center justify-center gap-2 min-h-[44px] text-sm sm:text-base",children:[e.jsx(te,{className:"w-4 h-4"}),"Back to Details"]}),e.jsx("div",{className:"text-xs sm:text-sm text-gray-500 text-center sm:text-right",children:"Sign above to continue to employee consent"})]})]}),m==="employee-decision"&&e.jsxs("div",{className:"bg-white rounded-xl sm:rounded-2xl shadow-lg p-4 sm:p-6",children:[e.jsxs("div",{className:"mb-6 sm:mb-8",children:[e.jsxs("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900 mb-2 flex items-center gap-2",children:[e.jsx(se,{className:"w-4 h-4 sm:w-5 sm:h-5 text-purple-600"}),"Employee Consent"]}),e.jsxs("p",{className:"text-gray-600 text-xs sm:text-sm",children:[i?.profile.firstName,", do you agree to this HR meeting request?"]})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg sm:rounded-xl p-4 sm:p-6 mb-4 sm:mb-6",children:[e.jsx("h3",{className:"font-semibold text-purple-900 mb-3 sm:mb-4 text-sm sm:text-base",children:"Meeting Request for You"}),e.jsxs("div",{className:"grid grid-cols-1 gap-2 sm:gap-3 text-xs sm:text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-purple-700",children:"Requested by:"}),e.jsxs("span",{className:"text-purple-600",children:[l?.firstName," ",l?.lastName]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-purple-700",children:"Context:"}),e.jsxs("span",{className:"text-purple-600",children:['"',o,'"']})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-purple-700",children:"Date Requested:"}),e.jsx("span",{className:"text-purple-600",children:new Date().toLocaleDateString()})]})]})]}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("button",{onClick:()=>Q(!0),className:"w-full bg-green-600 text-white px-4 sm:px-6 py-4 rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center gap-2 font-semibold min-h-[48px] text-sm sm:text-base",children:[e.jsx(D,{className:"w-4 h-4 sm:w-5 sm:h-5"}),"I Agree to This Meeting"]}),e.jsxs("button",{onClick:()=>Q(!1),className:"w-full bg-red-600 text-white px-4 sm:px-6 py-4 rounded-lg hover:bg-red-700 transition-colors flex items-center justify-center gap-2 font-semibold min-h-[48px] text-sm sm:text-base",children:[e.jsx(Ne,{className:"w-4 h-4 sm:w-5 sm:h-5"}),"I Do Not Consent (Manager Request Only)"]})]}),w&&e.jsx("div",{className:"mt-6 sm:mt-8 space-y-4 sm:space-y-6",children:e.jsxs("div",{className:"border-t pt-4 sm:pt-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3 sm:mb-4 text-sm sm:text-base",children:"Employee Signature Required"}),e.jsx(ae,{onSignatureChange:ie,label:"Employee Consent Signature",required:!0,role:"employee",personName:`${i?.profile?.firstName||i?.firstName} ${i?.profile?.lastName||i?.lastName}`})]})}),e.jsx("div",{className:"mt-6 sm:mt-8 flex justify-center",children:e.jsx("p",{className:"text-xs sm:text-sm text-gray-500 text-center",children:"Your response will be recorded and sent to HR"})})]})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsx("div",{className:"text-6xl mb-4",children:"âš ï¸"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Organization Not Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"You don't seem to be associated with an organization."}),e.jsx("button",{onClick:()=>N("/dashboard"),className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"Return to Dashboard"})]})})};export{Re as BookHRMeeting};
